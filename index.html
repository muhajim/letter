<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Letter for You ‚ù§Ô∏è</title>

<link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">

<style>
  body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: url("hearts.gif") no-repeat center center fixed;
  background-size: cover;
  text-align: center;
  margin: 0;
  padding: 20px;
}

  input[type=date], input[type=text] {
    font-size: 1.2rem;
    padding: 8px;
    margin: 6px 0;
  }
  button {
    font-size: 1.3rem;
    padding: 10px 20px;
    margin-top: 20px;
    border-radius: 10px;
    cursor: pointer;
    background: #d91e5b;
    color: white;
    border: none;
    font-weight: bold;
    transition: background 0.3s;
  }
  button:hover {
    background: #b01544;
  }
  #messageResult {
    margin-top: 15px;
    font-size: 1.4rem;
    font-weight: 700;
    color: #b30059;
  }
  #birthdayMessage, #nicknameMessage {
    font-size: 20px;
    margin-top: 10px;
    font-weight: bold;       
    font-family: inherit;    
}
  /* Envelope style */
  #envelope {
    display: none;
    margin: 40px auto;
    width: 400px;
    height: 250px;
    background: linear-gradient(145deg, #ffb6c1, #ff99aa);
    border-radius: 20px;
    position: relative;
    box-shadow: 0 8px 20px rgba(255, 102, 153, 0.4);
    cursor: pointer;
    transform-origin: center center;
    transition: transform 0.4s ease, box-shadow 0.3s ease;
  }
  #envelope:hover {
    transform: scale(1.05);
    box-shadow: 0 12px 28px rgba(255, 51, 119, 0.5);
  }
  #envelope::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    border-left: 200px solid transparent;
    border-right: 200px solid transparent;
    border-bottom: 120px solid rgba(255, 204, 221, 0.9);
    border-radius: 10px;
  }
  #envelope .stamp {
    position: absolute;
    top: 15px;
    right: 15px;
    background: #ff4d88;
    color: white;
    padding: 10px 14px;
    border-radius: 12px;
    font-family: 'Brush Script MT', cursive;
    font-size: 1.5rem;
    font-weight: 700;
    box-shadow: 0 3px 8px rgba(0,0,0,0.2);
    transform: rotate(5deg);
  }
  #letter {
    display: none;
    max-width: 600px;
    margin: 30px auto;
    background: #fffdf5;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    padding: 20px;
    color: #b30059;
    font-size: 1.2rem;
    white-space: pre-wrap;
    transform-origin: top center;
    transform: scaleY(0);
    transition: transform 0.8s ease-out;
    overflow: hidden;
  }
  #letter.open {
    transform: scaleY(1);
  }
  #letterFooter {
    margin-top: 30px;
    font-style: italic;
    display: none;
  }
  #heartCanvas {
    display: none;
    background: pink;
    margin: 20px auto;
    border-radius: 12px;
    box-shadow: 0 0 20px #ff99bb88;
  }
  #heartButton {
    display: none;
    margin: 20px auto;
  }
</style>
</head>
<body>

<div id="birthdaySection">
  <label style="font-size:1.4rem;">Enter wanie's birthday:</label><br/>
  <input type="date" id="birthdayInput" /><br/>
  <button id="checkBirthday">Submit Birthday</button>
  <div id="birthdayMessage"></div>
</div>

<div id="nicknameSection" style="display:none;">
  <label style="font-size:1.4rem;">Enter wanie's nickname:</label><br/>
  <input type="text" id="nicknameInput"  /><br/>
  <button id="checkNickname">Submit Nickname</button>
  <div id="nicknameMessage"></div>
</div>

<div id="envelope">
  <div class="stamp">‚ù§Ô∏è Click to Open ‚ù§Ô∏è</div>
</div>

<div id="letter">
  <div id="letterBody"></div>
  <div id="letterFooter"></div>
</div>

<canvas id="heartCanvas" width="800" height="800"></canvas>
<button id="heartButton">Click for heart</button>

<audio id="music" src="niki.mp3" preload="auto" loop></audio>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const correctBirthday = "2004-06-19"; 
  const validNicknames = ["wewen", "miwen", "wiwin","iwin"];
const message = `Hi Wanieee!,

Okay‚Ä¶ so here‚Äôs the truth. I really, really like you . The ‚Äúsomeone‚Äù I said I found‚Ä¶ yeah, that‚Äôs you but you already knew haha.   
I know you‚Äôre not into the whole couple thing, and that‚Äôs totally fine I‚Äôm not saying this to pressure you. I just couldn‚Äôt keep it in anymore. You deserve to know how special you are to me.

Honestly, I started catching feelings the moment we spent time chatting. Your funny yapping vlogs, your endless oversharing (which I secretly LOVE listening to ), and the way you just *be yourself*  it all pulled me in. Every time I see your name pop up on my phone, I can‚Äôt help but smile like a fool. You have this magic where even on my worst days, you make everything feel lighter and happier.

Even though we‚Äôve only been talking online, I swear there‚Äôs this ‚Äúclick‚Äù whenever I‚Äôm with you. I can imagine us talking for hours, laughing over silly things, and maybe even falling for you over and over again‚Ä¶ infinitely.  

I know trusting people isn‚Äôt easy, but I hope over time, I can be the one who changes that for you. I‚Äôm not expecting you to say anything back  I just want to be real with you.  

You are the reason my heart skips a beat, the reason my smile lasts longer than usual, and the reason I look forward to each day a little more. And no matter what happens, I still want us to laugh together, talk about random nonsense, and share those little moments that make life brighter.  

I really like you, Wanie. I truly wish and I will pray to be your husband in the future because u said u only like your husband jaaaa hahaha(sorry if this sounds cringe, but I‚Äôm serious).

So yeah‚Ä¶ that‚Äôs my little confession. üíñ
`;

  const checkBirthdayBtn = document.getElementById("checkBirthday");
  const birthdayMessage = document.getElementById("birthdayMessage");

  const nicknameSection = document.getElementById("nicknameSection");
  const nicknameInput = document.getElementById("nicknameInput");
  const checkNicknameBtn = document.getElementById("checkNickname");
  const nicknameMessage = document.getElementById("nicknameMessage");

  const envelope = document.getElementById("envelope");
  const letter = document.getElementById("letter");
  const letterBody = document.getElementById("letterBody");
  const letterFooter = document.getElementById("letterFooter");
  const heartCanvas = document.getElementById("heartCanvas");
  const heartButton = document.getElementById("heartButton");
  const music = document.getElementById("music");
  const ctx = heartCanvas.getContext('2d');

  function typeWriter(text, element, speed=50, callback) {
    let i = 0;
    element.innerHTML = "";
    function typing() {
      if (i < text.length) {
        element.innerHTML += text.charAt(i);
        i++;
        setTimeout(typing, speed);
      } else if (callback) callback();
    }
    typing();
  }

  checkBirthdayBtn.addEventListener("click", () => {
    if (birthdayInput.value !== correctBirthday) {
      birthdayMessage.style.color = "red";
      birthdayMessage.textContent = "You are not Wanieee !S ";
    } else {
      birthdayMessage.style.color = "green";
      birthdayMessage.textContent = "Hmm okayy nampak mcm waniee";
      nicknameSection.style.display = "block";
    }
  });

  checkNicknameBtn.addEventListener("click", () => {
    const nicknameVal = nicknameInput.value.trim().toLowerCase();
    if (!validNicknames.includes(nicknameVal)) {
      nicknameMessage.style.color = "red";
      nicknameMessage.textContent = "Ohh you are impostor!! üò± How you know Wanie's birthday haa???";
    } else {
      nicknameMessage.style.color = "green";
      nicknameMessage.textContent = `Wahh!! Hii ${nicknameVal} !!`;
      envelope.style.display = "block";
    }
  });

  envelope.addEventListener("click", () => {
  music.currentTime = 0; 
  music.play(); 
  envelope.style.transform = "scale(0)";
  setTimeout(() => {
    envelope.style.display = "none";
    letter.style.display = "block";
    setTimeout(() => {
      letter.classList.add("open");
      typeWriter(message, letterBody, 40, () => {
        letterFooter.style.display = "block";
        heartButton.style.display = "inline-block";
      });
    }, 50);
  }, 400);
});


  const hearts = [
    { x: 400, y: 650, size: 300, color: '#FF9999', thickness: 5 },
    { x: 400, y: 620, size: 270, color: '#FFCCCC', thickness: 5 },
    { x: 400, y: 590, size: 240, color: '#FFE6E6', thickness: 5 },
    { x: 400, y: 560, size: 210, color: '#FFCCCC', thickness: 5 },
    { x: 400, y: 530, size: 180, color: '#FF99CC', thickness: 5 },
    { x: 400, y: 500, size: 150, color: '#FFCCFF', thickness: 5 },
    { x: 400, y: 470, size: 120, color: '#FF6666', thickness: 5 },
  ];
  function drawHeart(ctx, x, y, size, color, thickness, progress) {
    ctx.save();
    ctx.translate(x, y);
    ctx.scale(size / 32, size / 32);
    ctx.lineWidth = thickness;
    ctx.strokeStyle = color;
    ctx.fillStyle = color;
    const steps = 200;
    const maxT = 2 * Math.PI * progress;
    ctx.beginPath();
    for (let i = 0; i <= steps; i++) {
      let t = (maxT * i) / steps;
      let px = 16 * Math.pow(Math.sin(t), 3);
      let py = 13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t);
      py = -py;
      if (i === 0) ctx.moveTo(px, py);
      else ctx.lineTo(px, py);
    }
    ctx.stroke();
    ctx.fill();
    ctx.restore();
  }
  function sleep(ms) { return new Promise(res => setTimeout(res, ms)); }
  async function animateHearts() {
    heartButton.style.display = "none";
    letter.style.display = "none";
    heartCanvas.style.display = "block";
    music.currentTime = 0;
    music.play();
    for (let i = 0; i < hearts.length; i++) {
      let heart = hearts[i];
      for (let progress = 0; progress <= 1; progress += 0.02) {
        ctx.clearRect(0, 0, heartCanvas.width, heartCanvas.height);
        for (let j = 0; j < i; j++) {
          let h = hearts[j];
          drawHeart(ctx, h.x, h.y, h.size, h.color, h.thickness, 1);
        }
        drawHeart(ctx, heart.x, heart.y, heart.size, heart.color, heart.thickness, progress);
        await sleep(30);
      }
      if (i === hearts.length - 1) {
        ctx.font = "48px Brush Script MT, cursive";
        ctx.fillStyle = "#ff80aa";
        ctx.textAlign = "center";
        ctx.fillText("I like you", heartCanvas.width / 2, heartCanvas.height / 3 + 20);
      }
    }
    setTimeout(() => {
      heartCanvas.style.display = "none";
      letter.style.display = "block";
      heartButton.style.display = "inline-block";
    }, 2000);
  }
  heartButton.addEventListener("click", animateHearts);
});
</script>
</body>
</html>

